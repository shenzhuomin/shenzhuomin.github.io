<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <link rel="stylesheet" href="./css/style.css">
</head>
<body>
    <div id="table"></div>
    <script>
        function readTextFile(file, callback) {
            var rawFile = new XMLHttpRequest();  
            rawFile.overrideMimeType("application/json");  
            rawFile.open("GET", file, true);  
            rawFile.onreadystatechange = function() {  
                if (rawFile.readyState === 4 && rawFile.status == "200") {  
                    callback(rawFile.responseText);  
                }  
            }  
            rawFile.send(null);  
        }

        readTextFile("https://shenzhuomin.github.io/ExpressionTest/data/erbaodata.json", function(text){  
            var data = JSON.parse(text);
            console.log(data.RECORDS);
            // console.log(JSON.parse(data.RECORDS[57].test_result))


            // let oldData = data.RECORDS.slice(0,57)
            // oldData = oldData.concat(data.RECORDS.slice(58, 76))

            let newData = data.RECORDS
            // newData = newData.concat(data.RECORDS[57])
            
            // let tableString = '<table><thead><tr><th>姓名</th><th>高兴</th><th>厌恶</th><th>愤怒</th><th>惊讶</th><th>悲伤</th><th>恐惧</th></tr></thead><tbody>'
            let tableString2 = '<table><thead><tr><th>姓名</th><th>手机</th></tr></thead><tbody>'

            // for (let item of oldData) {
            //     let expTest = JSON.parse(item.test_result).test_app.result.expression
            //     // console.log(expTest)
            //     tableString += '<tr><td>'+item.name+'</td><td>'+expTest.HaCorrectCount/10+'</td><td>'+expTest.DiCorrectCount/10+'</td><td>'+expTest.AnCorrectCount/10+'</td><td>'+expTest.SuCorrectCount/10+'</td><td>'+expTest.SaCorrectCount/10+'</td><td>'+expTest.FeCorrectCount/10+'</td></tr>'
            // }

            for (let item of newData) {
                // let expTest = JSON.parse(item.test_result).result.expression
                // let expTest = JSON.parse(item.test_result)
                // console.log(expTest)
                tableString2 += '<tr><td>'+item.name+'</td><td>'+item.phone+'</td></tr>'
            }
            tableString2 += '</tbody></table>'
            document.getElementById("table").innerHTML = tableString2
        })
    </script>
</body>
</html>